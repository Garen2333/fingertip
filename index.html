<!DOCTYPE html>
<html lang="en-US">

<head>

	<meta charset="UTF-8">
	<title>Insole v0.0.1</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="main.css">
	<script type="text/javascript" src="./smoothie.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
	<script src="./index.js" defer></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	




</head>


<body onload="createTimeline();" onresize="adjust_width();" style="background-color: lightgrey;text-align: center">
	<br />
	<br />
	<br />
	<div id="settings">

		
	
		<div style="padding: 5px; display: flex; align-items: center; padding-left: 10px; border: 1px solid #aaa; margin: 5px; border-radius: 10px; display: none;">
			<div style="display: flex; align-items: center;">
				<label for="input" style="font-size: 30px;">Command</label>
				<img src="icon/terminal.png" style="height: 30px; margin-left: 10px;">
				<input type="text" id="input" name="input" style="width: 80px;" value="">
				<button type="button" onclick="sendInput()">
					Send
				</button>
			</div>

			<!-- <div style="padding: 50px;">
				<label for="concentration" style="font-size: 20px;">Command:</label>
				
				<input type="number" id="concentration" name="concentration" style="width: 70px;" value="">
				<button type="button" onclick="sendInput()">
					Send
				</button>
			</div>
			<div style="padding: 50px;">
				<label for="concentration" style="font-size: 20px;">K:</label>
				<input type="number" id="concentration" name="concentration" style="width: 70px;" value="">
				<button type="button" onclick="sendInput()">
					input
				</button>
			</div> -->
		
		</div>


	</div>



	<div id="dashboard" style="margin: auto;">
		
		
	</div>


	<div style="text-align: center;"> 
		<p id="ketoneLevel">0</p>
	</div>


	<div style="display: none;">
		<label for="log" style="font-size: 20px;">Log</label><br>
		<textarea id="log" rows="5" cols="50" style="width: 80%;"></textarea>
	</div>
	
	<br />
	<div class="tab" style="display: none;" >
		<button class="tablinks" onclick="openTab(event, 'chart-area')" style="font-size: 23px; font-weight: 500;">Raw Data Graph</button>
		<button class="tablinks" onclick="openTab(event, 'numerical-data')" style="font-size: 23px; font-weight: 500;">Concentration Graph</button>
	</div>
	<!-- <div id="chart-area" style="text-align: center;">
		<br />Glucose<br />
		<canvas id="rawchart" width="1200" height="120"></canvas><br />

		<br />Lact000ate<br />
		<canvas id="ecgchart" width="1200" height="120"></canvas><br />

		<br />Vitamin C<br />
		<canvas id="ecgchart" width="1200" height="120"></canvas><br />

		<br />L-dopa<br />
		<canvas id="ecgchart" width="1200" height="120"></canvas><br />
	</div> -->
	<div id="chart-area" class="tabcontent" style="display: none;">
		
		<div style="background-color: #fff3cd; border-radius: 50px; margin: 20px 20px">
			<br />
			<label for="ldopachart"  style="font-size: 20px;"> Raw Data </label>
			<br />
			<canvas id="ldopachart"></canvas><br />
		</div>
	</div>

	<div id="numerical-data" class="tabcontent" style="display: none;">

		<div style="background-color: #fff3cd; border-radius: 50px; margin: 20px 20px">
			<br />
			<label for="concentrationchart"  style="font-size: 20px;"> Concentration </label>
			<br />
			<canvas id="concentrationchart"></canvas><br />
		</div>
	
	</div>
	
	
	
	
	
	
	


	<div id="spinner" class="loader center" style="display:none;"></div>
	<!-- <canvas id="bpchart" width="1200" height="300"></canvas><br /> -->

	<div id="stage" >
		<button class="button button1" type="button" onclick="ble_connect()">
			Connect
		</button>
		
		<button class="button button2" type="button" onclick="bleDisconnect()">
			Disconnect
		</button>
		
		<input id="savebutton" class="button button3" type="button" onclick="save('bp_patch', dataLog);" value="Download Data">
	</div>

	<style>
		.circle-card {
			border-radius: 50%;
			width: 200px;
			height: 200px;
			text-align: center;
			padding: 60px 20px;
			color: white;
		}
		.circle-card h5 {
			margin-top: 15px;
		}
	</style>
	

	

	
</body>

</html>

<script>
	const ketoneLevel = 0; // Replace with actual value

	// Get the SVG circle element
	const circle = document.querySelector('#ring circle');

	// Define ketone level ranges and corresponding colors
	const levelRanges = [
	{ max: 0.6, color: 'green' },
	{ max: 1.5, color: 'yellow' },
	{ max: 3.0, color: 'orange' },
	{ max: Infinity, color: 'red' },
	];

	// Determine the color based on the ketone level
	let color;
	for (const range of levelRanges) {
	if (ketoneLevel <= range.max) {
		color = range.color;
		break;
	}
	}

	// Set the stroke color of the circle based on the ketone level
	circle.setAttribute('stroke', color);

	// Display the ketone level
	document.getElementById('ketoneLevel').textContent = `${ketoneLevel}`;
</script>

<style>


	#dashboard {
		background: url('icon/insole-removebg-preview.png') no-repeat center; 
		background-size: auto 100%;
		position: relative;
		
		height: 50vh;
	}

	#ring {
	position: absolute;
	top: 10%;
	left: 6vw;
	}

	#ketoneLevel {
	
	
	font-size:55px;
	font-weight: bold;
	}

	#stage {
		background-color: rgb(48, 183, 232);
		width: 90%;
		border-radius: 50px;
		display: flex;
		flex-direction: row;
		justify-content: center;
		align-items: center;
		height: 100px;
		gap: 10px;
		margin: auto;
		margin-top: 1vh;

	}

	#stage > button{
		width: 25%;
		text-align: center;

	}

	#settings{
		display:flex;
		align-items: center; 
		flex-wrap: wrap; 
		justify-content: center;
	}
	#chart-area {
		display: grid; 
		
		text-align: center; 
		height: 300px;
	}

	#numerical-data {
		display: none; 
		
		text-align: center; 
		height: 300px;
	}


	.sensor {
            width: 50px;
            height: 50px;
            background-color: #f00;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 50%; /* Making sensors circular */
        }

	.sensor-top {
		top: 20vh; /* Adjusted to better fit foot shape */
		left: 6vw;
	}

	.sensor-bottom {
		bottom: 50px; /* Adjusted to better fit foot shape */
	}

	.insole {
    width: 27vw;
    height: 60vh;
    background: url('icon/insoles.png') no-repeat center; 
    background-size: cover; /* This ensures the image covers the whole div */
    
    position: relative;
    margin: 50px auto;
	}

</style>